{% load static %}
<!DOCTYPE html>
<html>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{% static 'main-style.css' %}">
<body>
<nav class="menu">
    <div class="menu__left-side"> 
        <svg class="icon-menu icon-menu--left"  onclick="toggleSidebar()" clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m22 16.75c0-.414-.336-.75-.75-.75h-18.5c-.414 0-.75.336-.75.75s.336.75.75.75h18.5c.414 0 .75-.336.75-.75zm0-5c0-.414-.336-.75-.75-.75h-18.5c-.414 0-.75.336-.75.75s.336.75.75.75h18.5c.414 0 .75-.336.75-.75zm0-5c0-.414-.336-.75-.75-.75h-18.5c-.414 0-.75.336-.75.75s.336.75.75.75h18.5c.414 0 .75-.336.75-.75z" fill-rule="nonzero"/></svg>
        <h2 class="menu__title">My App</h2>
    </div>
    <div class="menu__right-side"> 
        <form action="{% url 'my_account' %}" method="post" style="display:inline;">
            {% csrf_token %}
            <button type="submit" style="border:none; background:none; padding:0; cursor:pointer;">
                <img class="icon-menu icon-menu--right" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xMiAwYzYuNjIzIDAgMTIgNS4zNzcgMTIgMTJzLTUuMzc3IDEyLTEyIDEyLTEyLTUuMzc3LTEyLTEyIDUuMzc3LTEyIDEyLTEyem04LjEyNyAxOS40MWMtLjI4Mi0uNDAxLS43NzItLjY1NC0xLjYyNC0uODUtMy44NDgtLjkwNi00LjA5Ny0xLjUwMS00LjM1Mi0yLjA1OS0uMjU5LS41NjUtLjE5LTEuMjMuMjA1LTEuOTc3IDEuNzI2LTMuMjU3IDIuMDktNi4wMjQgMS4wMjctNy43OS0uNjc0LTEuMTE5LTEuODc1LTEuNzM0LTMuMzgzLTEuNzM0LTEuNTIxIDAtMi43MzIuNjI2LTMuNDA5IDEuNzYzLTEuMDY2IDEuNzg5LS42OTMgNC41NDQgMS4wNDkgNy43NTcuNDAyLjc0Mi40NzYgMS40MDYuMjIgMS45NzQtLjI2NS41ODYtLjYxMSAxLjE5LTQuMzY1IDIuMDY2LS44NTIuMTk2LTEuMzQyLjQ0OS0xLjYyMy44NDggMi4wMTIgMi4yMDcgNC45MSAzLjU5MiA4LjEyOCAzLjU5MnM2LjExNS0xLjM4NSA4LjEyNy0zLjU5em0uNjUtLjc4MmMxLjM5NS0xLjg0NCAyLjIyMy00LjE0IDIuMjIzLTYuNjI4IDAtNi4wNzEtNC45MjktMTEtMTEtMTFzLTExIDQuOTI5LTExIDExYzAgMi40ODcuODI3IDQuNzgzIDIuMjIyIDYuNjI2LjQwOS0uNDUyIDEuMDQ5LS44MSAyLjA0OS0xLjA0MSAyLjAyNS0uNDYyIDMuMzc2LS44MzYgMy42NzgtMS41MDIuMTIyLS4yNzIuMDYxLS42MjgtLjE4OC0xLjA4Ny0xLjkxNy0zLjUzNS0yLjI4Mi02LjY0MS0xLjAzLTguNzQ1Ljg1My0xLjQzMSAyLjQwOC0yLjI1MSA0LjI2OS0yLjI1MSAxLjg0NSAwIDMuMzkxLjgwOCA0LjI0IDIuMjE4IDEuMjUxIDIuMDc5Ljg5NiA1LjE5NS0xIDguNzc0LS4yNDUuNDYzLS4zMDQuODIxLS4xNzkgMS4wOTQuMzA1LjY2OCAxLjY0NCAxLjAzOCAzLjY2NyAxLjQ5OSAxIC4yMyAxLjY0LjU5IDIuMDQ5IDEuMDQzeiIvPjwvc3ZnPg==">
            </button>
        </form>
        <p class="menu__name">{{ user.username }} </p>
        <form action="{% url 'logout' %}" method="post" style="display:inline;">
            {% csrf_token %}
            <button type="submit" style="border:none; background:none; padding:0; cursor:pointer;">
                <img class="icon-menu icon-menu--right" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xMSAyMWg4LjAzM3YtMmwxLTF2NGgtOS4wMzN2MmwtMTAtM3YtMThsMTAtM3YyaDkuMDMzdjVsLTEtMXYtM2gtOC4wMzN2MTh6bS0xIDEuNjU2di0yMS4zMTJsLTggMi40djE2LjUxMmw4IDIuNHptMTEuMDg2LTEwLjY1NmwtMy4yOTMtMy4yOTMuNzA3LS43MDcgNC41IDQuNS00LjUgNC41LS43MDctLjcwNyAzLjI5My0zLjI5M2gtOS4wNTN2LTFoOS4wNTN6Ii8+PC9zdmc+">
            </button>
        </form>
       
        </a>
    </div>
</nav>
<div class="sidebar">
    {% if user_groups %}
    {% for group in user_groups %}
        {% if group.id == 1 %}
            <div class="sidebar-title">
                <img class="sidebar-icon sidebar-icon--work-icon" src="{% static 'work.png' %}">
                <h2 class="sidebar-text sidebar-text--one">Gestion Manager</h2>
            </div>
            <ul class="sidebar__list">
                <li><a href="{% url 'add_manager' %}" class="item">Add Manager</a></li>
                <li><a href="{% url 'manager_members' %}" class="item">See Managers</a></li>
            </ul>
        {% endif %}
        {% if group.id == 2 and not can_create_team %}
            {% for team_name in technician_teams %}
                <div class="sidebar-title">
                    <img class="sidebar-icon sidebar-icon--work-icon" src="{% static 'work.png' %}">
                    <h2 class="sidebar-text sidebar-text--one"> 
                       Team : {{ team_name }} 
                    </h2>
                </div>
                <ul class="sidebar__list">
                    <li><a href="{% url 'add_technician' %}" class="item">Add Technicien</a></li>
                    <li><a href="{% url 'technician_members' %}" class="item">See Techniciens</a></li>
                    <li><a href="{% url 'task_list' %}" class="item">See our Team Tasks</a></li>
                    <li><a href="{% url 'users_without_team' %}" class="item">Techinican without team</a></li>
                    <li><a href="{% url 'upload_model' %}" class="item">Upload Model</a></li>
                    <li><a href="{% url 'model_list' %}" class="item">Model List</a></li>
                </ul>
            {% endfor %}
        {% endif %}
        {% if can_create_team %}
            <div class="sidebar-title">
                <img class="sidebar-icon sidebar-icon--work-icon" src="{% static 'work.png' %}">
                <h2 class="sidebar-text sidebar-text--one">Gestion Team</h2>
            </div>
            <ul class="sidebar__list">
                <li><a href="{% url 'create_team' %}" class="item">Créer une équipe</a></li>
            </ul>
        {% endif%}
        {% if group.id == 3 %}
            <div class="sidebar-title">
                <img class="sidebar-icon sidebar-icon--work-icon" src="{% static 'work.png' %}">
                <h2 class="sidebar-text sidebar-text--one"> 
               Work Orders 
                </h2>
            </div>
            <ul class="sidebar__list">
                <li><a href="{% url 'works_orders' %}" class="item">All Work Orders</a></li>
                <li><a href="{% url 'my_tasks' %}" class="item">My Work Orders</a></li>
                <li><a href="{% url 'tasks_done' %}" class="item">Finished Work Orders</a></li>
                <li><a href="{% url 'model_list' %}" class="item">Model List</a></li>
            </ul>
        {% endif %}
    {% endfor %}
{% endif %}
</div>

<div class="main-content">
    {% block content %}
    <h1> Default Content </h1>
    {% endblock %}
</div>

</body>
</html>

<script> 
    
    
    
 
    function toggleSidebar() {
        let sidebar = document.querySelector('.sidebar');
        let btn = document.querySelector('.icon-menu--left');
        let elements = sidebar.querySelectorAll('*'); // Sélectionne tous les éléments dans .sidebar
        let presentation = document.querySelector('.presentation');
        let listWork = document.querySelector('.list-orders');
        let items = sidebar.querySelectorAll('.item');

        
        if (window.innerWidth <= 768) {
            if (sidebar.style.width === '0%' || !sidebar.style.width) { 
                sidebar.style.width = '100%';
                elements.forEach(element => {
                    element.style.display = ''; // Réinitialiser l'affichage
                    element.style.visibility = 'visible'; // Assurez-vous que tous les éléments sont visibles
                });
                items.forEach(item => {
                    item.style.display = ''; // Réinitialiser l'affichage
                    item.style.visibility = 'visible'; // Assurez-vous que tous les éléments sont visibles
                });
                listWork.style.display = 'none';
                if (presentation) {
                    presentation.classList.add('presentation--shifted');
                }
            } else { 
                sidebar.style.width = '0%';
                elements.forEach(element => {
                    element.style.display = 'none'; // Masquer tous les éléments
                });
                items.forEach(item => {
                    item.style.display = 'none'; // Masquer tous les éléments
                });
                listWork.style.display = '';
                if (presentation) {
                    presentation.classList.remove('presentation--shifted');
                }
            }
        }
    }
    

    
  
</script>